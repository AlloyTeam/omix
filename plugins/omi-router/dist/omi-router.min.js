/*!
 *  OmiRouter v0.2.0 By dntzhang 
 *  Github: https://github.com/AlloyTeam/omi
 *  MIT Licensed.
 */
!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t(require("omi")):"function"==typeof define&&define.amd?define(["omi"],t):"object"==typeof exports?exports.OmiRouter=t(require("omi")):e.OmiRouter=t(e.omi)}(this,function(e){return function(e){function t(r){if(n[r])return n[r].exports;var o=n[r]={exports:{},id:r,loaded:!1};return e[r].call(o.exports,o,o.exports,t),o.loaded=!0,o.exports}var n={};return t.m=e,t.c=n,t.p="",t(0)}([function(e,t,n){!function(){function t(e,t){var n={};return e.forEach(function(e,r){r>0&&(n[t[r].replace(":","")]=e)}),n}function r(e){d.routes.every(function(n){var r=e.match(n.reg);if(r){var i=n.path.match(n.reg);return l=t(r,i),f=n.renderTo||d.renderTo,h=n.store||d.store,s=n.component,v=n,o(e),!1}return!0})}function o(e){window.location.hash=e}function i(){h?(h.$route={},h.$route.params=l):h={methods:{install:function(){this.$route={},this.$route.params=l}}},m===f&&g&&!d.increment&&a(g);var e;if(d.increment)for(var t=0,n=w.length;t<n;t++)if(w[t]instanceof s){e=w[t];break}e||(e=new s,d.increment&&w.push(e),c.render(e,f,{store:h,increment:d.increment}),d.init&&d.init({component:e,preComponent:g,preRoute:x,route:v})),d.change&&d.change({component:e,preComponent:g,preRoute:x,route:v}),x=v,g=e,m=f}function a(e){for(var t in c.instances)if(c.instances.hasOwnProperty(t)&&c.instances[t].id===e.id){delete c.instances[t],e=null;break}}var u={},c=n(1),p=n(2),f=null,l={},s=null,h=null,d={},m=null,g=null,v=null,x=null,w=[];u.init=function(e){d=e,e.routes.forEach(function(e){e.reg=p(e.path)}),c.extendPlugin("omi-router",function(e,t){e.setAttribute("href","javascript:void(0)"),e.addEventListener("click",function(){r(e.getAttribute("to"))},!1)});var t=window.location.hash.replace("#","");r(t?t:d.defaultRoute,f),t&&e.root.onInstalled(function(){i()})},window.addEventListener("hashchange",function(){r(window.location.hash.replace("#",""),f),i()},!1),e.exports=u}()},function(t,n){t.exports=e},function(e,t,n){function r(e,t){for(var n,r=[],o=0,i=0,a="",u=t&&t.delimiter||"/";null!=(n=x.exec(e));){var f=n[0],l=n[1],s=n.index;if(a+=e.slice(i,s),i=s+f.length,l)a+=l[1];else{var h=e[i],d=n[2],m=n[3],g=n[4],v=n[5],w=n[6],y=n[7];a&&(r.push(a),a="");var E=null!=d&&null!=h&&h!==d,b="+"===w||"*"===w,R="?"===w||"*"===w,$=n[2]||u,j=g||v;r.push({name:m||o++,prefix:d||"",delimiter:$,optional:R,repeat:b,partial:E,asterisk:!!y,pattern:j?p(j):y?".*":"[^"+c($)+"]+?"})}}return i<e.length&&(a+=e.substr(i)),a&&r.push(a),r}function o(e,t){return u(r(e,t))}function i(e){return encodeURI(e).replace(/[\/?#]/g,function(e){return"%"+e.charCodeAt(0).toString(16).toUpperCase()})}function a(e){return encodeURI(e).replace(/[?#]/g,function(e){return"%"+e.charCodeAt(0).toString(16).toUpperCase()})}function u(e){for(var t=new Array(e.length),n=0;n<e.length;n++)"object"==typeof e[n]&&(t[n]=new RegExp("^(?:"+e[n].pattern+")$"));return function(n,r){for(var o="",u=n||{},c=r||{},p=c.pretty?i:encodeURIComponent,f=0;f<e.length;f++){var l=e[f];if("string"!=typeof l){var s,h=u[l.name];if(null==h){if(l.optional){l.partial&&(o+=l.prefix);continue}throw new TypeError('Expected "'+l.name+'" to be defined')}if(v(h)){if(!l.repeat)throw new TypeError('Expected "'+l.name+'" to not repeat, but received `'+JSON.stringify(h)+"`");if(0===h.length){if(l.optional)continue;throw new TypeError('Expected "'+l.name+'" to not be empty')}for(var d=0;d<h.length;d++){if(s=p(h[d]),!t[f].test(s))throw new TypeError('Expected all "'+l.name+'" to match "'+l.pattern+'", but received `'+JSON.stringify(s)+"`");o+=(0===d?l.prefix:l.delimiter)+s}}else{if(s=l.asterisk?a(h):p(h),!t[f].test(s))throw new TypeError('Expected "'+l.name+'" to match "'+l.pattern+'", but received "'+s+'"');o+=l.prefix+s}}else o+=l}return o}}function c(e){return e.replace(/([.+*?=^!:${}()[\]|\/\\])/g,"\\$1")}function p(e){return e.replace(/([=!:$\/()])/g,"\\$1")}function f(e,t){return e.keys=t,e}function l(e){return e.sensitive?"":"i"}function s(e,t){var n=e.source.match(/\((?!\?)/g);if(n)for(var r=0;r<n.length;r++)t.push({name:r,prefix:null,delimiter:null,optional:!1,repeat:!1,partial:!1,asterisk:!1,pattern:null});return f(e,t)}function h(e,t,n){for(var r=[],o=0;o<e.length;o++)r.push(g(e[o],t,n).source);var i=new RegExp("(?:"+r.join("|")+")",l(n));return f(i,t)}function d(e,t,n){return m(r(e,n),t,n)}function m(e,t,n){v(t)||(n=t||n,t=[]),n=n||{};for(var r=n.strict,o=n.end!==!1,i="",a=0;a<e.length;a++){var u=e[a];if("string"==typeof u)i+=c(u);else{var p=c(u.prefix),s="(?:"+u.pattern+")";t.push(u),u.repeat&&(s+="(?:"+p+s+")*"),s=u.optional?u.partial?p+"("+s+")?":"(?:"+p+"("+s+"))?":p+"("+s+")",i+=s}}var h=c(n.delimiter||"/"),d=i.slice(-h.length)===h;return r||(i=(d?i.slice(0,-h.length):i)+"(?:"+h+"(?=$))?"),i+=o?"$":r&&d?"":"(?="+h+"|$)",f(new RegExp("^"+i,l(n)),t)}function g(e,t,n){return v(t)||(n=t||n,t=[]),n=n||{},e instanceof RegExp?s(e,t):v(e)?h(e,t,n):d(e,t,n)}var v=n(3);e.exports=g,e.exports.parse=r,e.exports.compile=o,e.exports.tokensToFunction=u,e.exports.tokensToRegExp=m;var x=new RegExp(["(\\\\.)","([\\/.])?(?:(?:\\:(\\w+)(?:\\(((?:\\\\.|[^\\\\()])+)\\))?|\\(((?:\\\\.|[^\\\\()])+)\\))([+*?])?|(\\*))"].join("|"),"g")},function(e,t){e.exports=Array.isArray||function(e){return"[object Array]"==Object.prototype.toString.call(e)}}])});