/*!
 *  OmiRouter v0.3.2 By dntzhang 
 *  Github: https://github.com/AlloyTeam/omi
 *  MIT Licensed.
 */
!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports.OmiRouter=t():e.OmiRouter=t()}(this,function(){return function(e){function t(r){if(n[r])return n[r].exports;var o=n[r]={i:r,l:!1,exports:{}};return e[r].call(o.exports,o,o.exports,t),o.l=!0,o.exports}var n={};return t.m=e,t.c=n,t.d=function(e,n,r){t.o(e,n)||Object.defineProperty(e,n,{configurable:!1,enumerable:!0,get:r})},t.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(n,"a",n),n},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="",t(t.s=0)}([function(e,t,n){!function(){function t(e,t){var n={};return e.forEach(function(e,r){r>0&&(n[t[r].replace(":","")]=e)}),n}function r(e){m.routes.every(function(n){var r=e.match(n.reg);if(r){var i=n.path.match(n.reg);return s=t(r,i),l=n.renderTo||m.renderTo,d=n.store||m.store,h=n.component,x=n,o(e),!1}return!0})}function o(e){window.location.hash=e}function i(){b.params=s,g===l&&v&&!m.increment&&a(v);var e;if(m.increment)for(var t=0,n=w.length;t<n;t++)if(w[t]instanceof h){e=w[t];break}var r=!0;if(m.beforeRoute&&(r=m.beforeRoute({preRoute:y,route:x,preComponent:v})),!1!==r){if(e)e.$route=b;else{if(!x.component.prototype.render)return void x.component().then(function(t){u(e,t.default),c(e)});u(e,h)}c(e)}}function u(e,t){e=new t,m.increment&&w.push(e),e.$route=b,Omi.render(e,l,{store:d,increment:m.increment}),m.init&&m.init({component:e,preComponent:v,preRoute:y,route:x})}function a(e){for(var t in Omi.instances)if(Omi.instances.hasOwnProperty(t)&&Omi.instances[t].id===e.id){delete Omi.instances[t],e=null;break}}function c(e){m.change&&m.change({component:e,preComponent:v,preRoute:y,route:x}),y=x,v=e,g=l}var p={},f=n(1),l=null,s={},h=null,d=null,m={},g=null,v=null,x=null,y=null,w=[],b={};p.init=function(e){m=e,e.routes.forEach(function(e){e.reg=f(e.path)}),Omi.extendPlugin("omi-router",function(e,t){e.setAttribute("href","#"+e.getAttribute("to"))});var t=window.location.hash.replace("#","");r(t||m.defaultRoute),t&&e.root.onInstalled(function(){i()})},window.addEventListener("hashchange",function(){r(window.location.hash.replace("#","")),i()},!1),e.exports=p}()},function(e,t,n){function r(e,t){for(var n,r=[],o=0,i=0,u="",a=t&&t.delimiter||"/";null!=(n=x.exec(e));){var f=n[0],l=n[1],s=n.index;if(u+=e.slice(i,s),i=s+f.length,l)u+=l[1];else{var h=e[i],d=n[2],m=n[3],g=n[4],v=n[5],y=n[6],w=n[7];u&&(r.push(u),u="");var b=null!=d&&null!=h&&h!==d,E="+"===y||"*"===y,R="?"===y||"*"===y,O=n[2]||a,j=g||v;r.push({name:m||o++,prefix:d||"",delimiter:O,optional:R,repeat:E,partial:b,asterisk:!!w,pattern:j?p(j):w?".*":"[^"+c(O)+"]+?"})}}return i<e.length&&(u+=e.substr(i)),u&&r.push(u),r}function o(e,t){return a(r(e,t))}function i(e){return encodeURI(e).replace(/[\/?#]/g,function(e){return"%"+e.charCodeAt(0).toString(16).toUpperCase()})}function u(e){return encodeURI(e).replace(/[?#]/g,function(e){return"%"+e.charCodeAt(0).toString(16).toUpperCase()})}function a(e){for(var t=new Array(e.length),n=0;n<e.length;n++)"object"==typeof e[n]&&(t[n]=new RegExp("^(?:"+e[n].pattern+")$"));return function(n,r){for(var o="",a=n||{},c=r||{},p=c.pretty?i:encodeURIComponent,f=0;f<e.length;f++){var l=e[f];if("string"!=typeof l){var s,h=a[l.name];if(null==h){if(l.optional){l.partial&&(o+=l.prefix);continue}throw new TypeError('Expected "'+l.name+'" to be defined')}if(v(h)){if(!l.repeat)throw new TypeError('Expected "'+l.name+'" to not repeat, but received `'+JSON.stringify(h)+"`");if(0===h.length){if(l.optional)continue;throw new TypeError('Expected "'+l.name+'" to not be empty')}for(var d=0;d<h.length;d++){if(s=p(h[d]),!t[f].test(s))throw new TypeError('Expected all "'+l.name+'" to match "'+l.pattern+'", but received `'+JSON.stringify(s)+"`");o+=(0===d?l.prefix:l.delimiter)+s}}else{if(s=l.asterisk?u(h):p(h),!t[f].test(s))throw new TypeError('Expected "'+l.name+'" to match "'+l.pattern+'", but received "'+s+'"');o+=l.prefix+s}}else o+=l}return o}}function c(e){return e.replace(/([.+*?=^!:${}()[\]|\/\\])/g,"\\$1")}function p(e){return e.replace(/([=!:$\/()])/g,"\\$1")}function f(e,t){return e.keys=t,e}function l(e){return e.sensitive?"":"i"}function s(e,t){var n=e.source.match(/\((?!\?)/g);if(n)for(var r=0;r<n.length;r++)t.push({name:r,prefix:null,delimiter:null,optional:!1,repeat:!1,partial:!1,asterisk:!1,pattern:null});return f(e,t)}function h(e,t,n){for(var r=[],o=0;o<e.length;o++)r.push(g(e[o],t,n).source);return f(new RegExp("(?:"+r.join("|")+")",l(n)),t)}function d(e,t,n){return m(r(e,n),t,n)}function m(e,t,n){v(t)||(n=t||n,t=[]),n=n||{};for(var r=n.strict,o=!1!==n.end,i="",u=0;u<e.length;u++){var a=e[u];if("string"==typeof a)i+=c(a);else{var p=c(a.prefix),s="(?:"+a.pattern+")";t.push(a),a.repeat&&(s+="(?:"+p+s+")*"),s=a.optional?a.partial?p+"("+s+")?":"(?:"+p+"("+s+"))?":p+"("+s+")",i+=s}}var h=c(n.delimiter||"/"),d=i.slice(-h.length)===h;return r||(i=(d?i.slice(0,-h.length):i)+"(?:"+h+"(?=$))?"),i+=o?"$":r&&d?"":"(?="+h+"|$)",f(new RegExp("^"+i,l(n)),t)}function g(e,t,n){return v(t)||(n=t||n,t=[]),n=n||{},e instanceof RegExp?s(e,t):v(e)?h(e,t,n):d(e,t,n)}var v=n(2);e.exports=g,e.exports.parse=r,e.exports.compile=o,e.exports.tokensToFunction=a,e.exports.tokensToRegExp=m;var x=new RegExp(["(\\\\.)","([\\/.])?(?:(?:\\:(\\w+)(?:\\(((?:\\\\.|[^\\\\()])+)\\))?|\\(((?:\\\\.|[^\\\\()])+)\\))([+*?])?|(\\*))"].join("|"),"g")},function(e,t){e.exports=Array.isArray||function(e){return"[object Array]"==Object.prototype.toString.call(e)}}])});